{% extends "admin/base_site.html" %}
{% load admin_urls static humanize %}

{% block extrastyle %}
<link rel="stylesheet" type="text/css" href="{% static 'admin/css/widgets.css' %}">
<style>
    .admindatefilter .button,
    .admindatefilter input[type=submit],
    .admindatefilter input[type=button],
    .admindatefilter .submit-row input,
    .admindatefilter a.button,
    .admindatefilter .button,
    .admindatefilter input[type=reset] {
        background: #79aec8;
        padding: 4px 5px;
        border: none;
        border-radius: 4px;
        color: #fff;
        cursor: pointer;
    }

    .admindatefilter {
        padding-left: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid #eaeaea;
    }

    .admindatefilter p {
        padding-left: 0px;
        line-height: 0;
    }

    .admindatefilter p.datetime {
        line-height: 0;
    }

    .admindatefilter .timezonewarning {
        display: none;
    }

    .admindatefilter .datetimeshortcuts a:first-child {
        margin-right: 4px;
        display: none;
    }

    .calendarbox {
        z-index: 1100;
    }

    .clockbox {
        z-index: 1100;
        margin-left: -8em !important;
        margin-top: 5em !important;
    }

    .admindatefilter .datetimeshortcuts {
        font-size: 0;
        float: right;
        position: absolute;
        padding-top: 4px;
    }

    .admindatefilter a {
        color: #999;
        position: absolute;
        padding-top: 3px;
        padding-left: 4px;
    }

    @media (min-width: 768px) {
        .calendarbox {
            margin-left: -16em !important;
            margin-top: 9em !important;
        }
    }

    @media (max-width: 767px) {
        .calendarbox {
            overflow: visible;
        }
    }
</style>

{% endblock %}


{% if not is_popup %}
{% block breadcrumbs %}
<div class="breadcrumbs">
    <a href="{% url 'admin:index' %}">Home</a>
    &rsaquo; <a href="{% url 'resumen_ventas:resumen_ventas' %}">Resumen de Ventas</a>
</div>
{% endblock %}
{% endif %}


{% block coltype %}{% endblock %}

{% block content %}
<div id="content-main">
    <table id="result_list" style="width: 70%;">
        <thead>
            <tr>
                <th scope="col" {{ header.class_attrib }} style="font-size: 16px;">
                    Total Registrado: $ {{ total|floatformat:"0"|intcomma }} COP - {{ cantidades }} Compras
                </th>
            </tr>
        </thead>
    </table>
    <br>
    {% if data %}
    <div class="results" style="display: flex;">
        <table id="result_list" style="width: 70%;">
            <thead>
                <tr>
                    {% for header in result_headers %}
                    <th scope="col" {{ header.class_attrib }}>
                        {{ header|capfirst }}
                    </th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for result in data %}
                <tr>
                    <td>{{ result.id }}</td>
                    <td>{{ result.cliente__nombre }}</td>
                    <td>{{ result.referencia }}</td>
                    <td>{{ result.total }}</td>
                    <td>{{ result.fecha }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>



        {% block filters %}
        <div id="changelist-filter"
            style="flex: 0 0 240px;order: 1;width: 240px;background: #f8f8f8;border-left: none;margin: 0 0 0 30px;">
            <h2>Filtro</h2>

            <h3>Por Fecha compra</h3>
            <div class="admindatefilter">
                <form method="GET" action="." id="fecha-compra-form">
                    <p> <input type="text" name="fecha__range__gte" class="vDateField" size="10" placeholder="Desde"
                            id="id_fecha__range__gte"><span class="datetimeshortcuts">&nbsp;<a
                                href="#">Hoy</a>&nbsp;|&nbsp;<a href="#" id="calendarlink0"><span class="date-icon"
                                    title="Elija una Fecha"></span></a></span></p>
                    <p> <input type="text" name="fecha__range__lte" class="vDateField" size="10" placeholder="Hasta"
                            id="id_fecha__range__lte"><span class="datetimeshortcuts">&nbsp;<a
                                href="#">Hoy</a>&nbsp;|&nbsp;<a href="#" id="calendarlink1"><span class="date-icon"
                                    title="Elija una Fecha"></span></a></span></p>

                    <input type="hidden" id="fecha-compra-query-string" value="?">

                    <div class="controls">
                        <input type="submit" value="Buscar"
                            onclick="datefilter_apply(event, 'fecha-compra-query-string', 'fecha-compra-form')">
                        <input type="reset" class="button" value="Reiniciar"
                            onclick="datefilter_reset('fecha-compra-query-string')">
                    </div>
                </form>
            </div>
            {% block extrahead %}{{ block.super }}

            <script src="{% static 'admin/js/calendar.js' %}"> </script>
            <script src="{% static 'admin/js/admin/DateTimeShortcuts.js' %}"> </script>
            <script>
                function datefilter_apply(event, qs_name, form_name) {
                    console.log("entroo")
                    event.preventDefault();
                    var query_string = django.jQuery('input#' + qs_name).val();
                    var form_data = django.jQuery('#' + form_name).serialize();
                    window.location = window.location.pathname + query_string + '&' + form_data;
                }
                function datefilter_reset(qs_name) {
                    var query_string = django.jQuery('input#' + qs_name).val();
                    window.location = window.location.pathname + query_string;
                }
            </script>
            <script>

                django.jQuery('document').ready(function () {
                    if (!('DateTimeShortcuts' in window)) {
                        django.jQuery.when(
                        ).done(function () {
                            django.jQuery('.datetimeshortcuts').remove();
                            DateTimeShortcuts.init();
                        });
                    }
                });
            </script>

            {% endblock %}

        </div>
        {% endblock %}
    </div>
    {% endif %}
</div>
{% endblock %}